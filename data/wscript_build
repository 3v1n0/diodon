#! /usr/bin/env python
# encoding: utf-8

bld.new_task_gen (
    features = "subst",
    source= "net.launchpad.Diodon.gschema.xml.in.in",
    target= "net.launchpad.Diodon.gschema.xml.in",
    GETTEXT_PACKAGE = bld.env['GETTEXT_PACKAGE'])

bld.new_task_gen (
  features = 'intltool_in',
  podir = '../po',
  source = 'net.launchpad.Diodon.gschema.xml.in',
  flags = ["-x", "-q", "-u", "-c"])
  
task = bld.new_task_gen (
    features = 'glib2')    
task.add_settings_schemas ('net.launchpad.Diodon.gschema.xml')

bld.new_task_gen (
  features = 'intltool_in',
  podir = '../po',
  source = 'diodon.desktop.in',
  flags = ["-d", "-q", "-u", "-c"],
  install_path = "${DATADIR}/applications")

if bld.env['HAVE_UNITY'] and bld.env['HAVE_DEE']:
    bld.new_task_gen (
      features = 'intltool_in',
      podir = '../po',
      source = 'diodon.place.in',
      flags = ["-d", "-q", "-u", "-c"],
      install_path = "${DATADIR}/unity/places")

bld.install_files('${SYSCONFDIR}/xdg/autostart', 'diodon.desktop')
bld.install_files('${DATADIR}/diodon', 'preferences.ui')
bld.install_files('${MANDIR}/man1', 'diodon.1.gz')
